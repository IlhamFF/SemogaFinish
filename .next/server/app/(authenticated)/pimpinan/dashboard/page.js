(()=>{var e={};e.id=4121,e.ids=[4121],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6211:(e,a,t)=>{"use strict";t.d(a,{A0:()=>i,BF:()=>o,Hj:()=>d,XI:()=>l,nA:()=>m,nd:()=>c});var r=t(60687),s=t(43210),n=t(4780);let l=s.forwardRef(({className:e,...a},t)=>(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",e),...a})}));l.displayName="Table";let i=s.forwardRef(({className:e,...a},t)=>(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",e),...a}));i.displayName="TableHeader";let o=s.forwardRef(({className:e,...a},t)=>(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...a}));o.displayName="TableBody",s.forwardRef(({className:e,...a},t)=>(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let d=s.forwardRef(({className:e,...a},t)=>(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));d.displayName="TableRow";let c=s.forwardRef(({className:e,...a},t)=>(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));c.displayName="TableHead";let m=s.forwardRef(({className:e,...a},t)=>(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));m.displayName="TableCell",s.forwardRef(({className:e,...a},t)=>(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption"},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},17176:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=t(65239),s=t(48088),n=t(88170),l=t.n(n),i=t(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(a,o);let d={children:["",{children:["(authenticated)",{children:["pimpinan",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,21677)),"/home/user/studio/src/app/(authenticated)/pimpinan/dashboard/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,38734)),"/home/user/studio/src/app/(authenticated)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/(authenticated)/pimpinan/dashboard/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(authenticated)/pimpinan/dashboard/page",pathname:"/pimpinan/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},17687:(e,a,t)=>{"use strict";t.d(a,{Nt:()=>p,at:()=>u});var r=t(60687),s=t(43210),n=t(48482),l=t(38246),i=t(57359),o=t(4780);let d={light:"",dark:".dark"},c=s.createContext(null);function m(){let e=s.useContext(c);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let u=s.forwardRef(({id:e,className:a,children:t,config:l,...i},d)=>{let m=s.useId(),u=`chart-${e||m.replace(/:/g,"")}`;return(0,r.jsx)(c.Provider,{value:{config:l},children:(0,r.jsxs)("div",{"data-chart":u,ref:d,className:(0,o.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",a),...i,children:[(0,r.jsx)(h,{id:u,config:l}),(0,r.jsx)(n.u,{children:t})]})})});u.displayName="Chart";let h=({id:e,config:a})=>{let t=Object.entries(a).filter(([,e])=>e.theme||e.color);return t.length?(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(d).map(([a,r])=>`
${r} [data-chart=${e}] {
${t.map(([e,t])=>{let r=t.theme?.[a]||t.color;return r?`  --color-${e}: ${r};`:null}).join("\n")}
}
`).join("\n")}}):null};l.m;let p=s.forwardRef(({active:e,payload:a,className:t,indicator:n="dot",hideLabel:l=!1,hideIndicator:i=!1,label:d,labelFormatter:c,labelClassName:u,formatter:h,color:p,nameKey:f,labelKey:g},j)=>{let{config:b}=m(),v=s.useMemo(()=>{if(l||!a?.length)return null;let[e]=a,t=`${g||e.dataKey||e.name||"value"}`,s=x(b,e,t),n=g||"string"!=typeof d?s?.label:b[d]?.label||d;return c?(0,r.jsx)("div",{className:(0,o.cn)("font-medium",u),children:c(n,a)}):n?(0,r.jsx)("div",{className:(0,o.cn)("font-medium",u),children:n}):null},[d,c,a,l,u,b,g]);if(!e||!a?.length)return null;let y=1===a.length&&"dot"!==n;return(0,r.jsxs)("div",{ref:j,className:(0,o.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",t),children:[y?null:v,(0,r.jsx)("div",{className:"grid gap-1.5",children:a.map((e,a)=>{let t=`${f||e.name||e.dataKey||"value"}`,s=x(b,e,t),l=p||e.payload.fill||e.color;return(0,r.jsx)("div",{className:(0,o.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===n&&"items-center"),children:h&&e?.value!==void 0&&e.name?h(e.value,e.name,e,a,e.payload):(0,r.jsxs)(r.Fragment,{children:[s?.icon?(0,r.jsx)(s.icon,{}):!i&&(0,r.jsx)("div",{className:(0,o.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===n,"w-1":"line"===n,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===n,"my-0.5":y&&"dashed"===n}),style:{"--color-bg":l,"--color-border":l}}),(0,r.jsxs)("div",{className:(0,o.cn)("flex flex-1 justify-between leading-none",y?"items-end":"items-center"),children:[(0,r.jsxs)("div",{className:"grid gap-1.5",children:[y?v:null,(0,r.jsx)("span",{className:"text-muted-foreground",children:s?.label||e.name})]}),e.value&&(0,r.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function x(e,a,t){if("object"!=typeof a||null===a)return;let r="payload"in a&&"object"==typeof a.payload&&null!==a.payload?a.payload:void 0,s=t;return t in a&&"string"==typeof a[t]?s=a[t]:r&&t in r&&"string"==typeof r[t]&&(s=r[t]),s in e?e[s]:e[t]}p.displayName="ChartTooltip",i.s,s.forwardRef(({className:e,hideIcon:a=!1,payload:t,verticalAlign:s="bottom",nameKey:n},l)=>{let{config:i}=m();return t?.length?(0,r.jsx)("div",{ref:l,className:(0,o.cn)("flex items-center justify-center gap-4","top"===s?"pb-3":"pt-3",e),children:t.map(e=>{let t=`${n||e.dataKey||"value"}`,s=x(i,e,t);return(0,r.jsxs)("div",{className:(0,o.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[s?.icon&&!a?(0,r.jsx)(s.icon,{}):(0,r.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),s?.label]},e.value)})}):null}).displayName="ChartLegend"},18830:(e,a,t)=>{Promise.resolve().then(t.bind(t,90209))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21677:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/(authenticated)/pimpinan/dashboard/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/(authenticated)/pimpinan/dashboard/page.tsx","default")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32742:(e,a,t)=>{Promise.resolve().then(t.bind(t,21677))},33873:e=>{"use strict";e.exports=require("path")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79551:e=>{"use strict";e.exports=require("url")},90209:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>k});var r=t(60687),s=t(44493),n=t(11516),l=t(48206),i=t(36731),o=t(82614);let d=(0,o.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),c=(0,o.A)("ChartBarBig",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"7",y:"13",width:"9",height:"4",rx:"1",key:"1iip1u"}],["rect",{x:"7",y:"5",width:"12",height:"4",rx:"1",key:"1anskk"}]]),m=(0,o.A)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);var u=t(31568),h=t(2041),p=t(85168),x=t(27747),f=t(9920),g=t(38246),j=t(90812),b=t(17687),v=t(43210),y=t(29867),w=t(6211);let N={rataRataKelas:[],peringkatSiswa:[],totalSiswa:0,totalGuru:0,totalKelas:0,totalMataPelajaran:0};function k(){let{user:e}=(0,u.A)(),{toast:a}=(0,y.dj)(),[t,o]=(0,v.useState)(N),[k,_]=(0,v.useState)(!0);(0,v.useCallback)(async()=>{_(!0);try{let e=await fetch("/api/laporan/akademik");if(!e.ok){let a=await e.json();throw Error(a.message||"Gagal mengambil data laporan akademik.")}o(await e.json())}catch(e){a({title:"Error Data Dasbor",description:e.message,variant:"destructive"}),o(N)}finally{_(!1)}},[a]);let R=(0,v.useMemo)(()=>{let e=t.rataRataKelas.length>0?(t.rataRataKelas.reduce((e,a)=>e+a.rataRata,0)/t.rataRataKelas.length).toFixed(2):0;return[{title:"Total Siswa Aktif",value:k?(0,r.jsx)(n.A,{className:"h-5 w-5 animate-spin"}):t.totalSiswa.toString(),icon:l.A,color:"text-primary"},{title:"Total Guru",value:k?(0,r.jsx)(n.A,{className:"h-5 w-5 animate-spin"}):t.totalGuru.toString(),icon:l.A,color:"text-green-500"},{title:"Jumlah Kelas",value:k?(0,r.jsx)(n.A,{className:"h-5 w-5 animate-spin"}):t.totalKelas.toString(),icon:i.A,color:"text-yellow-500"},{title:"Nilai Rata-rata Sekolah",value:k?(0,r.jsx)(n.A,{className:"h-5 w-5 animate-spin"}):e.toString(),icon:d,color:"text-indigo-500"}]},[k,t]);return e&&("pimpinan"===e.role||"superadmin"===e.role)?k?(0,r.jsxs)("div",{className:"flex h-full items-center justify-center",children:[(0,r.jsx)(n.A,{className:"h-12 w-12 animate-spin text-primary"})," ",(0,r.jsx)("span",{className:"ml-3",children:"Memuat data dasbor..."})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-headline font-semibold",children:"Dasbor Pimpinan SMA Az-Bail"}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:["Selamat datang, ",e.fullName||e.name||e.email,"! Gambaran umum kinerja institusi dan metrik utama."]}),(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:R.map(e=>(0,r.jsxs)(s.Zp,{className:"shadow-lg hover:shadow-xl transition-shadow",children:[(0,r.jsxs)(s.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(s.ZB,{className:"text-sm font-medium",children:e.title}),(0,r.jsx)(e.icon,{className:`h-5 w-5 ${e.color}`})]}),(0,r.jsx)(s.Wu,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:e.value})})]},e.title))}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(s.Zp,{className:"shadow-lg",children:[(0,r.jsxs)(s.aR,{children:[(0,r.jsxs)(s.ZB,{className:"flex items-center",children:[(0,r.jsx)(c,{className:"mr-2 h-5 w-5 text-primary"}),"Performa Rata-rata per Kelas"]}),(0,r.jsx)(s.BT,{children:"Perbandingan nilai rata-rata akhir dari semua mata pelajaran di setiap kelas."})]}),(0,r.jsx)(s.Wu,{children:t.rataRataKelas.length>0?(0,r.jsx)("div",{className:"h-[400px]",children:(0,r.jsx)(b.at,{config:{rataRata:{label:"Rata-Rata Nilai",color:"hsl(var(--primary))"}},className:"w-full h-full",children:(0,r.jsxs)(h.E,{data:t.rataRataKelas,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[(0,r.jsx)(p.d,{strokeDasharray:"3 3",horizontal:!1}),(0,r.jsx)(x.W,{type:"number",stroke:"hsl(var(--foreground))",fontSize:12,domain:[0,100]}),(0,r.jsx)(f.h,{dataKey:"name",type:"category",stroke:"hsl(var(--foreground))",fontSize:10,width:80,interval:0}),(0,r.jsx)(g.m,{content:(0,r.jsx)(b.Nt,{}),cursor:{fill:"hsl(var(--muted))"}}),(0,r.jsx)(j.y,{dataKey:"rataRata",fill:"var(--color-rataRata)",radius:[0,4,4,0],barSize:15})]})})}):(0,r.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"Data nilai rata-rata kelas belum tersedia."})})]}),(0,r.jsxs)(s.Zp,{className:"shadow-lg",children:[(0,r.jsxs)(s.aR,{children:[(0,r.jsxs)(s.ZB,{className:"flex items-center",children:[(0,r.jsx)(m,{className:"mr-2 h-5 w-5 text-yellow-500"}),"Peringkat Teratas Siswa"]}),(0,r.jsx)(s.BT,{children:"5 siswa dengan nilai rata-rata keseluruhan tertinggi."})]}),(0,r.jsx)(s.Wu,{className:"h-[400px]",children:t.peringkatSiswa.length>0?(0,r.jsxs)(w.XI,{children:[(0,r.jsx)(w.A0,{children:(0,r.jsxs)(w.Hj,{children:[(0,r.jsx)(w.nd,{children:"Peringkat"}),(0,r.jsx)(w.nd,{children:"Nama Siswa"}),(0,r.jsx)(w.nd,{children:"Kelas"}),(0,r.jsx)(w.nd,{className:"text-right",children:"Rata-rata"})]})}),(0,r.jsx)(w.BF,{children:t.peringkatSiswa.map((e,a)=>(0,r.jsxs)(w.Hj,{children:[(0,r.jsx)(w.nA,{className:"font-bold text-lg",children:a+1}),(0,r.jsx)(w.nA,{children:e.nama}),(0,r.jsx)(w.nA,{children:e.kelas}),(0,r.jsx)(w.nA,{className:"text-right font-medium text-primary",children:(+e.rataRata).toFixed(2)})]},e.nama))})]}):(0,r.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"Data peringkat siswa belum tersedia."})})]})]})]}):(0,r.jsx)("p",{children:"Akses Ditolak. Anda harus menjadi Pimpinan untuk melihat halaman ini."})}}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[4447,7689,2123,5814,2327,4744,2170,6861,3949],()=>t(17176));module.exports=r})();