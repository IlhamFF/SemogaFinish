(()=>{var e={};e.id=9690,e.ids=[9690],e.modules={880:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>o,pages:()=>c,routeModule:()=>m,tree:()=>u});var t=s(65239),i=s(48088),l=s(88170),n=s.n(l),r=s(30893),d={};for(let e in r)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>r[e]);s.d(a,d);let u={children:["",{children:["(authenticated)",{children:["guru",{children:["tugas",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,65402)),"/home/user/studio/src/app/(authenticated)/guru/tugas/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,38734)),"/home/user/studio/src/app/(authenticated)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/(authenticated)/guru/tugas/page.tsx"],o={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(authenticated)/guru/tugas/page",pathname:"/guru/tugas",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},45181:(e,a,s)=>{Promise.resolve().then(s.bind(s,90704))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65402:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/(authenticated)/guru/tugas/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/(authenticated)/guru/tugas/page.tsx","default")},75037:(e,a,s)=>{Promise.resolve().then(s.bind(s,65402))},79551:e=>{"use strict";e.exports=require("url")},90704:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>q});var t=s(60687),i=s(43210),l=s.n(i),n=s(44493),r=s(29523),d=s(89667),u=s(34729),c=s(31568),o=s(35265),m=s(63084),h=s(41936),x=s(11516),p=s(91840),j=s(57207),g=s(82614);let f=(0,g.A)("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);var v=s(66421);let w=(0,g.A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var b=s(63503),k=s(93500),y=s(71669),N=s(15079),C=s(40988),P=s(26373),A=s(4780),S=s(58261),T=s(19931),L=s(58682),M=s(34005),E=s(27605),G=s(63442),$=s(45880),F=s(29867),I=s(66420),D=s(6211),B=s(42692);let H=$.Ik({judul:$.Yj().min(5,{message:"Judul tugas minimal 5 karakter."}),mapel:$.Yj({required_error:"Mata pelajaran wajib dipilih."}),kelas:$.Yj({required_error:"Kelas wajib dipilih."}),tenggat:$.p6({required_error:"Tanggal tenggat wajib diisi."}),deskripsi:$.Yj().optional().nullable(),fileLampiranInput:$.bz().optional()});function q(){let{user:e}=(0,c.A)(),{toast:a}=(0,F.dj)(),[s,g]=(0,i.useState)([]),[$,q]=(0,i.useState)(!0),[_,z]=(0,i.useState)(""),[J,O]=(0,i.useState)("semua"),[R,V]=(0,i.useState)("semua"),[K,Y]=(0,i.useState)(!1),[U,W]=(0,i.useState)(null),[X,Z]=(0,i.useState)(!1),[Q,ee]=(0,i.useState)(null),[ea,es]=(0,i.useState)(!1),[et,ei]=(0,i.useState)(null),[el,en]=(0,i.useState)([]),[er,ed]=(0,i.useState)(!1),[eu,ec]=(0,i.useState)({}),[eo,em]=(0,i.useState)({}),[eh,ex]=(0,i.useState)([]),[ep,ej]=(0,i.useState)(!0),eg=(0,E.mN)({resolver:(0,G.u)(H),defaultValues:{judul:"",mapel:void 0,kelas:void 0,tenggat:new Date,deskripsi:"",fileLampiranInput:void 0}}),ef=l().useMemo(()=>{let e=[];return I.Tp.forEach(a=>{I.yc.forEach(s=>{for(let t=1;t<=I.A$;t++)e.push(`${a} ${s} ${t}`)})}),e},[]),ev=(0,i.useCallback)(async()=>{if(e){q(!0);try{let e=await fetch("/api/tugas");if(!e.ok){let a=await e.json();throw Error(a.message||"Gagal mengambil data tugas.")}let a=await e.json();g(a.map(e=>({...e,tenggat:e.tenggat?(0,S.H)(e.tenggat).toISOString():new Date().toISOString()})))}catch(e){a({title:"Error Tugas",description:e.message,variant:"destructive"})}finally{q(!1)}}},[e,a]);if((0,i.useCallback)(async()=>{if(e&&e.id){ej(!0);try{let a=await fetch(`/api/jadwal/pelajaran?guruId=${e.id}`);if(!a.ok)throw Error("Gagal mengambil data jadwal mengajar.");let s=await a.json(),t=[...new Set(s.map(e=>e.mapel.nama).filter(Boolean))].sort();ex(t)}catch(e){a({title:"Error Data Mapel",description:e.message,variant:"destructive"})}finally{ej(!1)}}},[e,a]),!e||"guru"!==e.role&&"superadmin"!==e.role)return(0,t.jsx)("p",{children:"Akses Ditolak. Anda harus menjadi Guru untuk melihat halaman ini."});let ew=async e=>{Z(!0);let s={judul:e.judul,mapel:e.mapel,kelas:e.kelas,tenggat:(0,T.x)(e.tenggat),deskripsi:e.deskripsi,namaFileLampiran:e.fileLampiranInput?e.fileLampiranInput.name:U?U.namaFileLampiran:null};!U||U&&e.fileLampiranInput?s.namaFileLampiran=e.fileLampiranInput?e.fileLampiranInput.name:null:U&&!e.fileLampiranInput&&(s.namaFileLampiran=U.namaFileLampiran);let t=U?`/api/tugas/${U.id}`:"/api/tugas",i=U?"PUT":"POST";try{let l=await fetch(t,{method:i,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!l.ok){let e=await l.json();throw Error(e.message||`Gagal ${U?"memperbarui":"membuat"} tugas.`)}a({title:"Berhasil!",description:`Tugas "${e.judul}" telah ${U?"diperbarui":"ditambahkan"}.`}),Y(!1),W(null),ev()}catch(e){a({title:"Error Tugas",description:e.message,variant:"destructive"})}finally{Z(!1)}},eb=e=>{W(e||null),Y(!0)},ek=e=>{ee(e)},ey=async()=>{if(Q){Z(!0);try{let e=await fetch(`/api/tugas/${Q.id}`,{method:"DELETE"});if(!e.ok){let a=await e.json();throw Error(a.message||"Gagal menghapus tugas.")}a({title:"Dihapus!",description:`Tugas "${Q.judul}" telah dihapus.`}),ev()}catch(e){a({title:"Error Hapus Tugas",description:e.message,variant:"destructive"})}finally{Z(!1),ee(null)}}},eN=(0,i.useMemo)(()=>s.filter(e=>(e.judul.toLowerCase().includes(_.toLowerCase())||e.mapel.toLowerCase().includes(_.toLowerCase()))&&("semua"===J||e.mapel===J)&&("semua"===R||e.kelas===R)),[s,_,J,R]),eC=["semua",...new Set(s.map(e=>e.mapel).sort())],eP=["semua",...new Set(s.map(e=>e.kelas).sort())],eA=e=>new Date(e.tenggat)<new Date&&"Ditutup"!==e.status?"Ditutup":e.status||"Aktif",eS=async e=>{ei(e),ed(!0),es(!0),ec({});try{let a=await fetch(`/api/tugas/${e.id}/submissions`);if(!a.ok){let e=await a.json();throw Error(e.message||"Gagal mengambil data pengumpulan.")}let s=await a.json();en(s);let t={};s.forEach(e=>{t[e.id]={nilai:e.nilai?.toString()||"",feedbackGuru:e.feedbackGuru||""}}),ec(t)}catch(e){a({title:"Error",description:e.message,variant:"destructive"}),en([])}finally{ed(!1)}},eT=(e,a,s)=>{ec(t=>({...t,[e]:{...t[e],[a]:s}}))},eL=async e=>{let s=eu[e.id];if(!s)return void a({title:"Data Tidak Lengkap",description:"Nilai atau feedback belum diisi.",variant:"destructive"});let t=parseFloat(s.nilai);if(isNaN(t)||t<0||t>100)return void a({title:"Nilai Tidak Valid",description:"Nilai harus antara 0 dan 100.",variant:"destructive"});em(a=>({...a,[e.id]:!0}));try{let i=await fetch(`/api/tugas/submissions/${e.id}/grade`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nilai:t,feedbackGuru:s.feedbackGuru})});if(!i.ok){let e=await i.json();throw Error(e.message||"Gagal menyimpan penilaian.")}a({title:"Penilaian Disimpan",description:`Nilai untuk ${e.siswa?.fullName||e.siswa?.name} telah disimpan.`}),en(a=>a.map(a=>a.id===e.id?{...a,nilai:t,feedbackGuru:s.feedbackGuru,status:"Dinilai"}:a))}catch(e){a({title:"Error Penilaian",description:e.message,variant:"destructive"})}finally{em(a=>({...a,[e.id]:!1}))}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-3xl font-headline font-semibold",children:"Manajemen Tugas"}),(0,t.jsxs)(r.$,{onClick:()=>eb(),children:[(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4"})," Buat Tugas Baru"]})]}),(0,t.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)(n.ZB,{className:"flex items-center",children:[(0,t.jsx)(m.A,{className:"mr-2 h-6 w-6 text-primary"}),"Pengelolaan Tugas Siswa"]}),(0,t.jsx)(n.BT,{children:"Buat, distribusikan, pantau pengumpulan, dan berikan umpan balik untuk tugas-tugas siswa."})]}),(0,t.jsxs)(n.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"relative w-full sm:w-auto sm:max-w-xs",children:[(0,t.jsx)(h.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(d.p,{placeholder:"Cari judul, mapel...",className:"pl-8",value:_,onChange:e=>z(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[(0,t.jsxs)(N.l6,{value:J,onValueChange:O,children:[(0,t.jsx)(N.bq,{className:"w-full sm:w-[180px]",children:(0,t.jsx)(N.yv,{placeholder:"Filter Mata Pelajaran"})}),(0,t.jsx)(N.gC,{children:eC.map(e=>(0,t.jsx)(N.eb,{value:e,children:"semua"===e?"Semua Mapel":e},e))})]}),(0,t.jsxs)(N.l6,{value:R,onValueChange:V,children:[(0,t.jsx)(N.bq,{className:"w-full sm:w-[180px]",children:(0,t.jsx)(N.yv,{placeholder:"Filter Kelas"})}),(0,t.jsx)(N.gC,{children:eP.map(e=>(0,t.jsx)(N.eb,{value:e,children:"semua"===e?"Semua Kelas":e},e))})]})]})]}),$?(0,t.jsx)("div",{className:"flex justify-center items-center h-60",children:(0,t.jsx)(x.A,{className:"h-10 w-10 animate-spin text-primary"})}):eN.length>0?(0,t.jsx)(B.F,{className:"h-[60vh] border rounded-md",children:(0,t.jsxs)(D.XI,{children:[(0,t.jsx)(D.A0,{className:"bg-muted/50 sticky top-0",children:(0,t.jsxs)(D.Hj,{children:[(0,t.jsx)(D.nd,{children:"Judul Tugas"}),(0,t.jsx)(D.nd,{children:"Mapel & Kelas"}),(0,t.jsx)(D.nd,{children:"Tenggat"}),(0,t.jsx)(D.nd,{children:"Status"}),(0,t.jsx)(D.nd,{className:"text-right",children:"Tindakan"})]})}),(0,t.jsx)(D.BF,{children:eN.map(e=>{let a=eA(e);return(0,t.jsxs)(D.Hj,{children:[(0,t.jsxs)(D.nA,{className:"max-w-xs",children:[(0,t.jsx)("div",{className:"font-medium truncate",title:e.judul,children:e.judul}),e.namaFileLampiran&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground truncate",title:e.namaFileLampiran,children:["Lampiran: ",e.namaFileLampiran]})]}),(0,t.jsxs)(D.nA,{children:[(0,t.jsx)("div",{className:"text-sm",children:e.mapel}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.kelas})]}),(0,t.jsx)(D.nA,{className:"text-sm text-muted-foreground",children:(0,L.GP)((0,S.H)(e.tenggat),"dd MMM yyyy, HH:mm",{locale:M.id})}),(0,t.jsx)(D.nA,{children:(0,t.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${"Aktif"===a?"bg-green-100 text-green-800":"Ditutup"===a?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:a})}),(0,t.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,t.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>eS(e),className:"mr-1",children:(0,t.jsx)(h.A,{className:"h-4 w-4"})}),(0,t.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>eb(e),className:"mr-1",children:(0,t.jsx)(p.A,{className:"h-4 w-4"})}),(0,t.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>ek(e),className:"text-destructive hover:text-destructive/80",children:(0,t.jsx)(j.A,{className:"h-4 w-4"})})]})]},e.id)})})]})}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(f,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,t.jsx)("h3",{className:"mt-2 text-sm font-medium text-foreground",children:"Belum Ada Tugas"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Filter tidak menemukan hasil atau belum ada tugas yang dibuat."})]})]})]}),(0,t.jsx)(b.lG,{open:K,onOpenChange:e=>{Y(e),e||W(null)},children:(0,t.jsxs)(b.Cf,{className:"sm:max-w-lg",children:[(0,t.jsxs)(b.c7,{children:[(0,t.jsx)(b.L3,{children:U?"Edit Tugas":"Buat Tugas Baru"}),(0,t.jsx)(b.rr,{children:U?`Perbarui detail untuk tugas "${U.judul}".`:"Isi detail tugas baru di bawah ini."})]}),(0,t.jsx)(y.lV,{...eg,children:(0,t.jsxs)("form",{onSubmit:eg.handleSubmit(ew),className:"space-y-4 py-2",children:[(0,t.jsx)(y.zB,{control:eg.control,name:"judul",render:({field:e})=>(0,t.jsxs)(y.eI,{children:[(0,t.jsx)(y.lR,{children:"Judul Tugas"}),(0,t.jsx)(y.MJ,{children:(0,t.jsx)(d.p,{placeholder:"Contoh: Latihan Soal Bab 1",...e})}),(0,t.jsx)(y.C5,{})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsx)(y.zB,{control:eg.control,name:"mapel",render:({field:e})=>(0,t.jsxs)(y.eI,{children:[(0,t.jsx)(y.lR,{children:"Mata Pelajaran"}),(0,t.jsxs)(N.l6,{onValueChange:e.onChange,value:e.value,children:[(0,t.jsx)(y.MJ,{children:(0,t.jsx)(N.bq,{children:ep?(0,t.jsx)(x.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(N.yv,{placeholder:"Pilih mapel"})})}),(0,t.jsx)(N.gC,{children:eh.map(e=>(0,t.jsx)(N.eb,{value:e,children:e},e))})]}),(0,t.jsx)(y.C5,{})]})}),(0,t.jsx)(y.zB,{control:eg.control,name:"kelas",render:({field:e})=>(0,t.jsxs)(y.eI,{children:[(0,t.jsx)(y.lR,{children:"Kelas Ditugaskan"}),(0,t.jsxs)(N.l6,{onValueChange:e.onChange,value:e.value,children:[(0,t.jsx)(y.MJ,{children:(0,t.jsx)(N.bq,{children:(0,t.jsx)(N.yv,{placeholder:"Pilih kelas"})})}),(0,t.jsx)(N.gC,{children:(0,t.jsx)(B.F,{className:"h-60",children:ef.map(e=>(0,t.jsx)(N.eb,{value:e,children:e},e))})})]}),(0,t.jsx)(y.C5,{})]})})]}),(0,t.jsx)(y.zB,{control:eg.control,name:"tenggat",render:({field:e})=>(0,t.jsxs)(y.eI,{className:"flex flex-col",children:[(0,t.jsx)(y.lR,{children:"Tanggal & Waktu Tenggat"}),(0,t.jsxs)(C.AM,{children:[(0,t.jsx)(C.Wv,{asChild:!0,children:(0,t.jsx)(y.MJ,{children:(0,t.jsxs)(r.$,{variant:"outline",className:(0,A.cn)("w-full justify-start text-left font-normal",!e.value&&"text-muted-foreground"),children:[e.value?(0,L.GP)(e.value,"PPP HH:mm",{locale:M.id}):(0,t.jsx)("span",{children:"Pilih tanggal & waktu"}),(0,t.jsx)(v.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,t.jsxs)(C.hl,{className:"w-auto p-0",children:[(0,t.jsx)(P.V,{mode:"single",selected:e.value,onSelect:e.onChange,initialFocus:!0}),(0,t.jsx)("div",{className:"p-3 border-t border-border",children:(0,t.jsx)(d.p,{type:"time",defaultValue:e.value?(0,L.GP)(e.value,"HH:mm"):"23:59",onChange:a=>{let s=a.target.value.split(":"),t=new Date(e.value||new Date);t.setHours(parseInt(s[0]),parseInt(s[1])),e.onChange(t)},className:"w-full"})})]})]}),(0,t.jsx)(y.C5,{})]})}),(0,t.jsx)(y.zB,{control:eg.control,name:"deskripsi",render:({field:e})=>(0,t.jsxs)(y.eI,{children:[(0,t.jsx)(y.lR,{children:"Deskripsi Tugas (Opsional)"}),(0,t.jsx)(y.MJ,{children:(0,t.jsx)(u.T,{placeholder:"Instruksi detail untuk siswa...",...e,value:e.value??"",rows:3})}),(0,t.jsx)(y.C5,{})]})}),(0,t.jsx)(y.zB,{control:eg.control,name:"fileLampiranInput",render:({field:{onChange:e,value:a,...s}})=>(0,t.jsxs)(y.eI,{children:[(0,t.jsxs)(y.lR,{children:["File Lampiran (Opsional) ",U?.namaFileLampiran?`(File saat ini: ${U.namaFileLampiran}. Kosongkan jika tidak diubah)`:""]}),(0,t.jsx)(y.MJ,{children:(0,t.jsx)(d.p,{type:"file",onChange:a=>e(a.target.files?a.target.files[0]:null),...s})}),(0,t.jsx)(y.Rr,{children:"PDF, DOC, dll."}),(0,t.jsx)(y.C5,{})]})}),(0,t.jsxs)(b.Es,{className:"pt-4",children:[(0,t.jsx)(r.$,{type:"button",variant:"outline",onClick:()=>{Y(!1),W(null)},disabled:X,children:"Batal"}),(0,t.jsxs)(r.$,{type:"submit",disabled:X,children:[X&&(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}),U?"Simpan Perubahan":"Simpan Tugas"]})]})]})})]})}),(0,t.jsx)(k.Lt,{open:!!Q,onOpenChange:e=>!e&&ee(null),children:(0,t.jsxs)(k.EO,{children:[(0,t.jsxs)(k.wd,{children:[(0,t.jsx)(k.r7,{children:"Konfirmasi Hapus Tugas"}),(0,t.jsxs)(k.$v,{children:['Apakah Anda yakin ingin menghapus tugas "',Q?.judul,'"? Tindakan ini tidak dapat dibatalkan.']})]}),(0,t.jsxs)(k.ck,{children:[(0,t.jsx)(k.Zr,{onClick:()=>ee(null),disabled:X,children:"Batal"}),(0,t.jsxs)(k.Rx,{onClick:ey,className:"bg-destructive hover:bg-destructive/90",disabled:X,children:[X&&(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Ya, Hapus Tugas"]})]})]})}),(0,t.jsx)(b.lG,{open:ea,onOpenChange:es,children:(0,t.jsxs)(b.Cf,{className:"max-w-3xl max-h-[90vh] flex flex-col",children:[(0,t.jsxs)(b.c7,{children:[(0,t.jsxs)(b.L3,{children:["Penilaian Tugas: ",et?.judul]}),(0,t.jsxs)(b.rr,{children:["Lihat pengumpulan siswa dan berikan nilai serta feedback. Mapel: ",et?.mapel,", Kelas: ",et?.kelas]})]}),(0,t.jsx)("div",{className:"flex-grow overflow-y-auto py-4",children:er?(0,t.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,t.jsx)(x.A,{className:"h-8 w-8 animate-spin text-primary"})}):el.length>0?(0,t.jsxs)(D.XI,{children:[(0,t.jsx)(D.A0,{children:(0,t.jsxs)(D.Hj,{children:[(0,t.jsx)(D.nd,{className:"w-[200px]",children:"Nama Siswa"}),(0,t.jsx)(D.nd,{children:"Dikumpulkan Pada"}),(0,t.jsx)(D.nd,{children:"File Jawaban"}),(0,t.jsx)(D.nd,{className:"w-[100px]",children:"Nilai (0-100)"}),(0,t.jsx)(D.nd,{children:"Feedback Guru"}),(0,t.jsx)(D.nd,{className:"text-right w-[120px]",children:"Aksi"})]})}),(0,t.jsx)(D.BF,{children:el.map(e=>(0,t.jsxs)(D.Hj,{children:[(0,t.jsx)(D.nA,{className:"font-medium",children:e.siswa?.fullName||e.siswa?.name||e.siswaId}),(0,t.jsx)(D.nA,{children:(0,L.GP)((0,S.H)(e.dikumpulkanPada),"dd MMM yyyy, HH:mm",{locale:M.id})}),(0,t.jsx)(D.nA,{children:e.fileUrlJawaban?(0,t.jsx)(r.$,{variant:"link",size:"sm",asChild:!0,className:"p-0 h-auto",children:(0,t.jsxs)("a",{href:e.fileUrlJawaban,target:"_blank",rel:"noopener noreferrer",className:"text-xs",children:[e.namaFileJawaban||"Lihat File"," ",(0,t.jsx)(w,{className:"inline-block ml-1 h-3 w-3"})]})}):(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Tidak ada file"})}),(0,t.jsx)(D.nA,{children:(0,t.jsx)(d.p,{type:"number",min:"0",max:"100",value:eu[e.id]?.nilai||"",onChange:a=>eT(e.id,"nilai",a.target.value),className:"h-8 text-sm",disabled:eo[e.id]||"Dinilai"===e.status})}),(0,t.jsx)(D.nA,{children:(0,t.jsx)(u.T,{value:eu[e.id]?.feedbackGuru||"",onChange:a=>eT(e.id,"feedbackGuru",a.target.value),className:"text-xs min-h-[40px]",rows:2,placeholder:"Feedback singkat...",disabled:eo[e.id]||"Dinilai"===e.status})}),(0,t.jsx)(D.nA,{className:"text-right",children:"Dinilai"!==e.status?(0,t.jsxs)(r.$,{size:"sm",onClick:()=>eL(e),disabled:eo[e.id],children:[eo[e.id]&&(0,t.jsx)(x.A,{className:"mr-1 h-3 w-3 animate-spin"}),"Simpan Nilai"]}):(0,t.jsx)("span",{className:"text-xs text-green-600 font-semibold",children:"Sudah Dinilai"})})]},e.id))})]}):(0,t.jsx)("p",{className:"text-center text-muted-foreground py-6",children:"Belum ada siswa yang mengumpulkan tugas ini."})}),(0,t.jsx)(b.Es,{children:(0,t.jsx)(b.HM,{asChild:!0,children:(0,t.jsx)(r.$,{variant:"outline",children:"Tutup"})})})]})})]})}}};var a=require("../../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[4447,7689,2123,5814,2327,8682,1758,2065,8123,7895,7963,6861,3949,6498,6316],()=>s(880));module.exports=t})();