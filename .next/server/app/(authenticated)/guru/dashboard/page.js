(()=>{var e={};e.id=8602,e.ids=[8602],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25229:(e,t,a)=>{Promise.resolve().then(a.bind(a,36586))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},36586:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/(authenticated)/guru/dashboard/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/(authenticated)/guru/dashboard/page.tsx","default")},48368:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>m,tree:()=>d});var s=a(65239),r=a(48088),n=a(88170),i=a.n(n),l=a(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d={children:["",{children:["(authenticated)",{children:["guru",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,36586)),"/home/user/studio/src/app/(authenticated)/guru/dashboard/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,38734)),"/home/user/studio/src/app/(authenticated)/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/home/user/studio/src/app/(authenticated)/guru/dashboard/page.tsx"],c={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/(authenticated)/guru/dashboard/page",pathname:"/guru/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},49197:(e,t,a)=>{Promise.resolve().then(a.bind(a,57316))},57316:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var s=a(60687),r=a(43210),n=a(44493),i=a(11516),l=a(97034),o=a(48206),d=a(92173),u=a(14975),c=a(92876),m=a(31568),h=a(90964),p=a(58261),x=a(76288),g=a(58682),f=a(34005),j=a(85814),v=a.n(j),b=a(66420),w=a(96834);function y(){let{user:e}=(0,m.A)(),[t,a]=(0,r.useState)([]),[j,y]=(0,r.useState)([]),[N,k]=(0,r.useState)([]),[A,P]=(0,r.useState)(!0);(0,r.useCallback)(async()=>{if(e&&e.id){P(!0);try{let[t,s,r]=await Promise.all([fetch(`/api/jadwal/pelajaran?guruId=${e.id}`),fetch("/api/tugas"),fetch("/api/test")]);t.ok?a(await t.json()):console.error("Failed to fetch jadwal"),s.ok?y(await s.json()):console.error("Failed to fetch tugas"),r.ok?k(await r.json()):console.error("Failed to fetch test")}catch(e){console.error("Error fetching dashboard data:",e)}finally{P(!1)}}},[e]);let M=(0,r.useMemo)(()=>{if(!e)return[];let a=new Set(t.map(e=>e.mapel?.nama).filter(Boolean)),r=new Set(t.map(e=>e.kelas).filter(Boolean)),n=j.length+N.length,c=[...j.filter(e=>(0,h.G)((0,p.H)(e.tenggat))&&7>=(0,x.c)((0,p.H)(e.tenggat),new Date)),...N.filter(e=>"Terjadwal"===e.status&&(0,h.G)((0,p.H)(e.tanggal))&&7>=(0,x.c)((0,p.H)(e.tanggal),new Date))].length;return[{title:"Mata Pelajaran",value:A?(0,s.jsx)(i.A,{className:"h-5 w-5 animate-spin"}):a.size.toString(),icon:l.A,color:"text-primary",href:b.bw.GURU_PENGAJARAN,description:"Jumlah mapel yang diampu"},{title:"Kelas",value:A?(0,s.jsx)(i.A,{className:"h-5 w-5 animate-spin"}):r.size.toString(),icon:o.A,color:"text-green-500",href:b.bw.GURU_PENGAJARAN,description:"Jumlah kelas yang diajar"},{title:"Tugas & Test",value:A?(0,s.jsx)(i.A,{className:"h-5 w-5 animate-spin"}):n.toString(),icon:d.A,color:"text-yellow-500",href:b.bw.GURU_TUGAS,description:"Total item yang dibuat"},{title:"Tenggat Mendatang",value:A?(0,s.jsx)(i.A,{className:"h-5 w-5 animate-spin"}):c.toString(),icon:u.A,color:"text-red-500",href:b.bw.GURU_TUGAS,description:"Tugas & Test dalam 7 hari"}]},[e,t,j,N,A]),G=(0,r.useMemo)(()=>{if(A)return[];let e=(0,g.GP)(new Date,"eeee",{locale:f.id});return t.filter(t=>t.hari===e).sort((e,t)=>(e.slotWaktu?.waktuMulai||"").localeCompare(t.slotWaktu?.waktuMulai||""))},[t,A]),_=(0,r.useMemo)(()=>A?[]:j.filter(e=>(0,h.G)((0,p.H)(e.tenggat))).sort((e,t)=>new Date(e.tenggat).getTime()-new Date(t.tenggat).getTime()).slice(0,5),[j,A]);return e&&("guru"===e.role||"superadmin"===e.role)?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-headline font-semibold",children:"Dasbor Guru"}),(0,s.jsxs)("p",{className:"text-muted-foreground",children:["Selamat datang, ",e.fullName||e.name||e.email,"! Kelola kursus, siswa, dan tugas Anda."]}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:M.map(e=>(0,s.jsx)(v(),{href:e.href||"#",passHref:!0,children:(0,s.jsxs)(n.Zp,{className:"shadow-lg hover:shadow-xl transition-shadow h-full flex flex-col",children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:e.title}),(0,s.jsx)(e.icon,{className:`h-5 w-5 ${e.color}`})]}),(0,s.jsxs)(n.Wu,{className:"flex-grow",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:e.value}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description||"Lihat detail â†’"})]})]})},e.title))}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsxs)(n.ZB,{className:"flex items-center",children:[(0,s.jsx)(c.A,{className:"mr-2 h-5 w-5 text-primary"})," Jadwal Mengajar Hari Ini"]}),(0,s.jsxs)(n.BT,{children:["Sesi pelajaran Anda untuk hari ",(0,g.GP)(new Date,"eeee, dd MMM yyyy",{locale:f.id}),"."]})]}),(0,s.jsx)(n.Wu,{className:"h-64 overflow-y-auto",children:A?(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)(i.A,{className:"h-6 w-6 animate-spin"})}):G.length>0?(0,s.jsx)("ul",{className:"space-y-3",children:G.map(e=>(0,s.jsxs)("li",{className:"text-sm p-3 bg-muted/50 rounded-md",children:[(0,s.jsx)("p",{className:"font-semibold text-primary",children:e.mapel?.nama}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,s.jsxs)("span",{children:["Kelas: ",e.kelas]}),(0,s.jsxs)("span",{children:["Ruang: ",e.ruangan?.nama]}),(0,s.jsxs)("span",{children:[e.slotWaktu?.waktuMulai," - ",e.slotWaktu?.waktuSelesai]})]})]},e.id))}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Tidak ada jadwal mengajar hari ini."})})]}),(0,s.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsxs)(n.ZB,{className:"flex items-center",children:[(0,s.jsx)(d.A,{className:"mr-2 h-5 w-5 text-primary"})," Tugas Mendatang"]}),(0,s.jsx)(n.BT,{children:"5 tugas dengan tenggat paling dekat."})]}),(0,s.jsx)(n.Wu,{className:"h-64 overflow-y-auto",children:A?(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)(i.A,{className:"h-6 w-6 animate-spin"})}):_.length>0?(0,s.jsx)("ul",{className:"space-y-3",children:_.map(e=>(0,s.jsxs)("li",{className:"text-sm p-3 bg-muted/50 rounded-md",children:[(0,s.jsx)("p",{className:"font-semibold",children:e.judul}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,s.jsxs)("span",{children:[e.mapel," - ",e.kelas]}),(0,s.jsxs)(w.E,{variant:"destructive",children:["Tenggat: ",(0,g.GP)((0,p.H)(e.tenggat),"dd MMM yyyy")]})]})]},e.id))}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Tidak ada tugas yang akan datang."})})]})]})]}):(0,s.jsx)("p",{children:"Akses Ditolak. Anda harus menjadi Guru untuk melihat halaman ini."})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},76288:(e,t,a)=>{"use strict";a.d(t,{c:()=>n});var s=a(89106),r=a(47138);function n(e,t){let a=(0,r.a)(e),n=(0,r.a)(t),l=i(a,n),o=Math.abs((0,s.m)(a,n));a.setDate(a.getDate()-l*o);let d=Number(i(a,n)===-l),u=l*(o-d);return 0===u?0:u}function i(e,t){let a=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return a<0?-1:a>0?1:a}},79551:e=>{"use strict";e.exports=require("url")},96834:(e,t,a)=>{"use strict";a.d(t,{E:()=>l});var s=a(60687);a(43210);var r=a(24224),n=a(4780);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...a}){return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:t}),e),...a})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[4447,7689,2123,5814,2327,8682,5276,6861,3949],()=>a(48368));module.exports=s})();