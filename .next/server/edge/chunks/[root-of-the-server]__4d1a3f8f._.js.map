{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/auth.config.ts"],"sourcesContent":["\nimport type { NextAuthConfig } from 'next-auth';\n\nexport const authConfig = {\n  pages: {\n    signIn: '/login',\n  },\n  session: {\n    strategy: 'jwt',\n  },\n  callbacks: {\n    // JWT callback to add role and id to the token\n    // This callback itself should be Edge-safe if it only manipulates the token\n    async jwt({ token, user, trigger, session }) {\n      if (user) { // user object is available during sign-in\n        token.id = user.id;\n        // @ts-expect-error role is custom\n        token.role = user.role;\n      }\n      // If session is updated (e.g. via update() function with new role)\n      if (trigger === \"update\" && session?.user?.role) {\n        token.role = session.user.role;\n      }\n      return token;\n    },\n    // Session callback to add role and id to the session object from the token\n    async session({ session, token }) {\n      if (token && session.user) {\n        session.user.id = token.id as string;\n        session.user.role = token.role as string;\n      }\n      return session;\n    },\n  },\n  providers: [], // Providers are added in the main src/auth.ts for Node.js runtime\n} satisfies NextAuthConfig;\n"],"names":[],"mappings":";;;AAGO,MAAM,aAAa;IACxB,OAAO;QACL,QAAQ;IACV;IACA,SAAS;QACP,UAAU;IACZ;IACA,WAAW;QACT,+CAA+C;QAC/C,4EAA4E;QAC5E,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE;YACzC,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,kCAAkC;gBAClC,MAAM,IAAI,GAAG,KAAK,IAAI;YACxB;YACA,mEAAmE;YACnE,IAAI,YAAY,YAAY,SAAS,MAAM,MAAM;gBAC/C,MAAM,IAAI,GAAG,QAAQ,IAAI,CAAC,IAAI;YAChC;YACA,OAAO;QACT;QACA,2EAA2E;QAC3E,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,SAAS,QAAQ,IAAI,EAAE;gBACzB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;gBAC1B,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;YAChC;YACA,OAAO;QACT;IACF;IACA,WAAW,EAAE;AACf"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/lib/constants.ts"],"sourcesContent":["import type { Role } from '@/types';\nimport { LayoutDashboard, Users, BarChart3, Bell, Settings, UserPlus, LogOut, ShieldCheck, VerifiedIcon } from 'lucide-react';\n\nexport const APP_NAME = 'EduCentral';\n\nexport const ROLES: Record<Role, string> = {\n  admin: 'Admin',\n  guru: 'Guru',\n  siswa: 'Siswa',\n  pimpinan: 'Pimpinan',\n  superadmin: 'Super Admin',\n};\n\nexport const ROUTES = {\n  HOME: '/',\n  LOGIN: '/login',\n  REGISTER: '/register',\n  VERIFY_EMAIL: '/verify-email',\n  ADMIN_DASHBOARD: '/admin/dashboard',\n  ADMIN_USERS: '/admin/users',\n  GURU_DASHBOARD: '/guru/dashboard',\n  SISWA_DASHBOARD: '/siswa/dashboard',\n  PIMPINAN_DASHBOARD: '/pimpinan/dashboard',\n  DATA_VISUALIZATION: '/data-visualization',\n  NOTIFICATIONS: '/notifications', // Placeholder for a dedicated notifications page\n  SETTINGS: '/settings', // Placeholder\n};\n\nexport const NAV_LINKS_CONFIG = [\n  { href: ROUTES.ADMIN_DASHBOARD, label: 'Dasbor', icon: LayoutDashboard, roles: ['admin', 'superadmin'] as Role[] },\n  { href: ROUTES.GURU_DASHBOARD, label: 'Dasbor', icon: LayoutDashboard, roles: ['guru'] as Role[] },\n  { href: ROUTES.SISWA_DASHBOARD, label: 'Dasbor', icon: LayoutDashboard, roles: ['siswa'] as Role[] },\n  { href: ROUTES.PIMPINAN_DASHBOARD, label: 'Dasbor', icon: LayoutDashboard, roles: ['pimpinan'] as Role[] },\n  \n  { href: ROUTES.ADMIN_USERS, label: 'Manajemen Pengguna', icon: Users, roles: ['admin', 'superadmin'] as Role[] },\n  { href: ROUTES.DATA_VISUALIZATION, label: 'Visualisasi Data', icon: BarChart3, roles: ['admin', 'guru', 'siswa', 'pimpinan', 'superadmin'] as Role[] },\n  // { href: ROUTES.NOTIFICATIONS, label: 'Notifikasi', icon: Bell, roles: ['admin', 'guru', 'siswa', 'pimpinan', 'superadmin'] as Role[] },\n  // { href: ROUTES.SETTINGS, label: 'Pengaturan', icon: Settings, roles: ['admin', 'guru', 'siswa', 'pimpinan', 'superadmin'] as Role[] },\n];\n\nexport const USER_NAV_ITEMS = [\n    // { href: ROUTES.SETTINGS, label: 'Pengaturan', icon: Settings },\n    { href: ROUTES.LOGIN, label: 'Keluar', icon: LogOut, action: 'logout' },\n];\n\nexport const DEFAULT_USERS_STORAGE_KEY = 'educentral_users';\nexport const AUTH_USER_STORAGE_KEY = 'educentral_auth_user';\n"],"names":[],"mappings":";;;;;;;;;AACA;AAAA;AAAA;AAAA;;AAEO,MAAM,WAAW;AAEjB,MAAM,QAA8B;IACzC,OAAO;IACP,MAAM;IACN,OAAO;IACP,UAAU;IACV,YAAY;AACd;AAEO,MAAM,SAAS;IACpB,MAAM;IACN,OAAO;IACP,UAAU;IACV,cAAc;IACd,iBAAiB;IACjB,aAAa;IACb,gBAAgB;IAChB,iBAAiB;IACjB,oBAAoB;IACpB,oBAAoB;IACpB,eAAe;IACf,UAAU;AACZ;AAEO,MAAM,mBAAmB;IAC9B;QAAE,MAAM,OAAO,eAAe;QAAE,OAAO;QAAU,MAAM,oOAAA,CAAA,kBAAe;QAAE,OAAO;YAAC;YAAS;SAAa;IAAW;IACjH;QAAE,MAAM,OAAO,cAAc;QAAE,OAAO;QAAU,MAAM,oOAAA,CAAA,kBAAe;QAAE,OAAO;YAAC;SAAO;IAAW;IACjG;QAAE,MAAM,OAAO,eAAe;QAAE,OAAO;QAAU,MAAM,oOAAA,CAAA,kBAAe;QAAE,OAAO;YAAC;SAAQ;IAAW;IACnG;QAAE,MAAM,OAAO,kBAAkB;QAAE,OAAO;QAAU,MAAM,oOAAA,CAAA,kBAAe;QAAE,OAAO;YAAC;SAAW;IAAW;IAEzG;QAAE,MAAM,OAAO,WAAW;QAAE,OAAO;QAAsB,MAAM,4MAAA,CAAA,QAAK;QAAE,OAAO;YAAC;YAAS;SAAa;IAAW;IAC/G;QAAE,MAAM,OAAO,kBAAkB;QAAE,OAAO;QAAoB,MAAM,0NAAA,CAAA,YAAS;QAAE,OAAO;YAAC;YAAS;YAAQ;YAAS;YAAY;SAAa;IAAW;CAGtJ;AAEM,MAAM,iBAAiB;IAC1B,kEAAkE;IAClE;QAAE,MAAM,OAAO,KAAK;QAAE,OAAO;QAAU,MAAM,kNAAA,CAAA,SAAM;QAAE,QAAQ;IAAS;CACzE;AAEM,MAAM,4BAA4B;AAClC,MAAM,wBAAwB"}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["\nimport NextAuth from 'next-auth';\nimport { authConfig } from './auth.config'; // Import the Edge-safe config\nimport { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\nimport { ROUTES } from '@/lib/constants';\n\nconst { auth } = NextAuth(authConfig); // Initialize NextAuth with Edge-safe config for middleware\n\nconst protectedRoutes = [\n  ROUTES.ADMIN_DASHBOARD,\n  ROUTES.ADMIN_USERS,\n  ROUTES.GURU_DASHBOARD,\n  ROUTES.SISWA_DASHBOARD,\n  ROUTES.PIMPINAN_DASHBOARD,\n  ROUTES.DATA_VISUALIZATION,\n  // Add any other routes that require authentication\n];\n\nconst authRoutes = [ROUTES.LOGIN, ROUTES.REGISTER, ROUTES.VERIFY_EMAIL]; // Routes for unauthenticated users\n\nexport default auth((req) => {\n  const { nextUrl } = req;\n  // req.auth is provided by the `auth` HOF after successful authentication\n  const session = req.auth;\n  const isAuthenticated = !!session;\n\n  const isProtectedRoute = protectedRoutes.some(route => nextUrl.pathname.startsWith(route));\n  const isAuthRoute = authRoutes.some(route => nextUrl.pathname.startsWith(route));\n\n  if (isProtectedRoute && !isAuthenticated) {\n    // Redirect unauthenticated users trying to access protected routes to login\n    const loginUrl = new URL(ROUTES.LOGIN, nextUrl.origin);\n    loginUrl.searchParams.set('callbackUrl', nextUrl.pathname); // Persist intended destination\n    return NextResponse.redirect(loginUrl);\n  }\n\n  if (isAuthRoute && isAuthenticated) {\n    // Redirect authenticated users trying to access login/register to their dashboard\n    let dashboardUrl = ROUTES.HOME; // Default redirect\n    if (session?.user?.role) {\n        switch (session.user.role) {\n            case 'admin': dashboardUrl = ROUTES.ADMIN_DASHBOARD; break;\n            case 'superadmin': dashboardUrl = ROUTES.ADMIN_DASHBOARD; break;\n            case 'guru': dashboardUrl = ROUTES.GURU_DASHBOARD; break;\n            case 'siswa': \n              // Assuming email verification is handled client-side or by page logic for siswa\n              dashboardUrl = ROUTES.SISWA_DASHBOARD; break; \n            case 'pimpinan': dashboardUrl = ROUTES.PIMPINAN_DASHBOARD; break;\n        }\n    }\n    return NextResponse.redirect(new URL(dashboardUrl, nextUrl.origin));\n  }\n\n  // Special handling for root page based on authentication status\n  if (nextUrl.pathname === ROUTES.HOME) {\n    if (isAuthenticated) {\n        let dashboardUrl = ROUTES.SISWA_DASHBOARD; // Default for safety\n        if (session?.user?.role) {\n            switch (session.user.role) {\n                case 'admin': dashboardUrl = ROUTES.ADMIN_DASHBOARD; break;\n                case 'superadmin': dashboardUrl = ROUTES.ADMIN_DASHBOARD; break;\n                case 'guru': dashboardUrl = ROUTES.GURU_DASHBOARD; break;\n                case 'siswa': dashboardUrl = ROUTES.SISWA_DASHBOARD; break;\n                case 'pimpinan': dashboardUrl = ROUTES.PIMPINAN_DASHBOARD; break;\n            }\n        }\n        return NextResponse.redirect(new URL(dashboardUrl, nextUrl.origin));\n    } else {\n        // If on home and not authenticated, redirect to login\n        return NextResponse.redirect(new URL(ROUTES.LOGIN, nextUrl.origin));\n    }\n  }\n\n  // Allow request to proceed\n  return NextResponse.next();\n});\n\n// Optionally, specify paths for the middleware to run on\nexport const config = {\n  matcher: [\n    /*\n     * Match all request paths except for the ones starting with:\n     * - api (API routes)\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     * - files in public folder\n     */\n    '/((?!api|_next/static|_next/image|favicon.ico|.*\\\\..*).*)',\n  ],\n};\n"],"names":[],"mappings":"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"}}]
}